{% extends 'base.html' %}

{% block title %}–ü–æ—Å—Ç—ã{% endblock %}

{% block content %}
  <div class="container mt-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h2 class="mb-0">–°–ø–∏—Å–æ–∫ –ø–æ—Å—Ç–æ–≤</h2>
      {% if user.is_authenticated %}
        <a href="{% url 'post_create' %}" class="btn btn-success">‚ûï –ù–æ–≤—ã–π –ø–æ—Å—Ç</a>
      {% endif %}
    </div>

    {% if posts %}
      <ul class="list-group">
        {% for post in posts %}
          <li class="list-group-item d-flex">

            <!-- üñº –ê–≤–∞—Ç–∞—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
            <div class="me-3">
              <img src="{{ post.author.profile.avatar.url|default:'/static/images/default_avatar.png' }}"
                   alt="Avatar" width="60" height="60" class="rounded-circle border">
            </div>

            <!-- üìÑ –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–æ—Å—Ç–∞ -->
            <div class="flex-grow-1">
              {% if post.slug %}
                <a href="{% url 'post_detail' post.slug %}" class="fw-bold text-decoration-none text-dark">
                  {{ post.title|default:"(–ë–µ–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞)" }}
                </a>
              {% else %}
                <span class="text-danger">–ü–æ—Å—Ç –±–µ–∑ slug: {{ post.title|default:"(–ë–µ–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞)" }}</span>
              {% endif %}
              <div class="text-muted small">
                –ê–≤—Ç–æ—Ä: {{ post.author.username }} ‚Ä¢ {{ post.created_at|date:"d.m.Y H:i" }}
              </div>

              <!-- üëç –õ–∞–π–∫–∏ -->
              <div class="mt-2">
                <span class="thumb-up">
                  {% if post.likes.count > 0 %}
                    <span class="filled-thumb" style="color: yellow;">üëç</span>
                  {% else %}
                    <span class="empty-thumb" style="color: white;">üëç</span>
                  {% endif %}
                </span>
                <span class="ml-2">{{ post.likes.count }} Likes</span>
              </div>
            </div>

          </li>
        {% endfor %}
      </ul>
    {% else %}
      <div class="alert alert-info mt-4" role="alert">
        –ü–æ–∫–∞ –Ω–µ—Ç –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤.
      </div>
    {% endif %}
  </div>
{% endblock %}
