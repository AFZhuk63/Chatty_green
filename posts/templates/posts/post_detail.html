{% extends 'base.html' %}
{% load static %}

{% block title %}
  –ü–æ—Å—Ç—ã
{% endblock %}

{% block content %}
<div class="container mt-4">
  <h2 class="mb-4">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –ø–æ—Å—Ç—ã</h2>

  {% if posts %}
    <div class="list-group">
      {% for post in posts %}
        <div class="list-group-item py-3 d-flex gap-3">

          <!-- –ú–∏–Ω–∏–∞—Ç—é—Ä–∞ –ø–æ—Å—Ç–∞ -->
          <div class="flex-shrink-0">
            {% if post.image %}
              <img src="{{ post.image.url }}" alt="–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ—Å—Ç–∞" class="rounded" width="100" height="100" style="object-fit: cover;">
            {% else %}
              <img src="{% static 'images/default_post.jpg' %}" alt="–ó–∞–≥–ª—É—à–∫–∞" class="rounded" width="100" height="100" style="object-fit: cover;">
            {% endif %}
          </div>

          <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –ø–æ—Å—Ç–∞ -->
          <div class="w-100">
            <a href="{% url 'posts:post_detail' post.slug %}" class="h5 fw-bold text-decoration-none text-dark d-block">
              {{ post.title|default:"(–ë–µ–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞)" }}
            </a>
            <p class="mb-2 text-muted small">{{ post.text|truncatewords:50 }}</p>

            <!-- –ü–æ–¥–≤–∞–ª —Å –∏–Ω—Ñ–æ –æ –ø–æ—Å—Ç–µ -->
            <div class="d-flex justify-content-between text-muted small mt-2">
              <div>
                üëç {{ post.likes.count }} | üëé {{ post.dislikes.count }} | üí¨ {{ post.comments.count }}
              </div>
              <div>
                üïí {{ post.created_at|date:"d M Y H:i" }} | ‚úçÔ∏è {{ post.author.username }}
              </div>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>

    <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è -->
    {% include "include/paginator.html" with page=page_obj %}

  {% else %}
    <div class="alert alert-info">–ü–æ—Å—Ç–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç.</div>
  {% endif %}
</div>
{% endblock %}
